# watt-poc

POC of Watt features

## Setup

Run the following commands:

- `npm run setup && npm run start`
- check that the service is up and running with `curl http://localhost:3043/typescript`
- check all the services all properly responding on `IPC` with `curl http://localhost:3043/tsfastify/ipc`
- check all the services all properly responding on `TCP` with `curl http://localhost:3043/tsfastify/tcp`

## Benchmarks

# IPC

Service communicating through `IPC` => `npx autocannon -c 100 -d 10 -p 10 http://localhost:3043/ipc`

┌─────────┬────────┬────────┬────────┬─────────┬───────────┬───────────┬─────────┐
│ Stat │ 2.5% │ 50% │ 97.5% │ 99% │ Avg │ Stdev │ Max │
├─────────┼────────┼────────┼────────┼─────────┼───────────┼───────────┼─────────┤
│ Latency │ 326 ms │ 526 ms │ 827 ms │ 1249 ms │ 535.43 ms │ 148.22 ms │ 1261 ms │
└─────────┴────────┴────────┴────────┴─────────┴───────────┴───────────┴─────────┘
┌───────────┬────────┬────────┬────────┬────────┬─────────┬─────────┬────────┐
│ Stat │ 1% │ 2.5% │ 50% │ 97.5% │ Avg │ Stdev │ Min │
├───────────┼────────┼────────┼────────┼────────┼─────────┼─────────┼────────┤
│ Req/Sec │ 1,010 │ 1,010 │ 1,910 │ 2,783 │ 1,829.4 │ 457.21 │ 1,010 │
├───────────┼────────┼────────┼────────┼────────┼─────────┼─────────┼────────┤
│ Bytes/Sec │ 165 kB │ 165 kB │ 312 kB │ 454 kB │ 298 kB │ 74.5 kB │ 165 kB │
└───────────┴────────┴────────┴────────┴────────┴─────────┴─────────┴────────┘

19k requests in 10.05s, 2.98 MB read

### TCP

Service communicating through `TCP` => `npx autocannon -c 100 -d 10 -p 10 http://localhost:3043/tcp`
┌─────────┬────────┬─────────┬─────────┬─────────┬────────────┬───────────┬─────────┐
│ Stat │ 2.5% │ 50% │ 97.5% │ 99% │ Avg │ Stdev │ Max │
├─────────┼────────┼─────────┼─────────┼─────────┼────────────┼───────────┼─────────┤
│ Latency │ 891 ms │ 1846 ms │ 4051 ms │ 4340 ms │ 1958.71 ms │ 630.19 ms │ 8922 ms │
└─────────┴────────┴─────────┴─────────┴─────────┴────────────┴───────────┴─────────┘
┌───────────┬─────────┬─────────┬─────────┬────────┬─────────┬─────────┬─────────┐
│ Stat │ 1% │ 2.5% │ 50% │ 97.5% │ Avg │ Stdev │ Min │
├───────────┼─────────┼─────────┼─────────┼────────┼─────────┼─────────┼─────────┤
│ Req/Sec │ 55 │ 55 │ 413 │ 964 │ 475 │ 347.28 │ 55 │
├───────────┼─────────┼─────────┼─────────┼────────┼─────────┼─────────┼─────────┤
│ Bytes/Sec │ 13.9 kB │ 13.9 kB │ 67.3 kB │ 161 kB │ 78.4 kB │ 56.6 kB │ 13.9 kB │
└───────────┴─────────┴─────────┴─────────┴────────┴─────────┴─────────┴─────────┘

4672 2xx responses, 78 non 2xx responses
6k requests in 10.04s, 784 kB read
5 errors (0 timeouts)
